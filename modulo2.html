<!DOCTYPE html>
<html>

<head>
    <title>Modulo 2</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-storage.js"></script>
    <style>
        .course-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
        }

        .course-details {
            flex-grow: 1;
            margin-left: 20px;
            text-align: justify;
        }
    </style>
</head>

<body>
    <header class="header-course text-center py-4 bg-primary text-white">
        <h1>Modulo 2 (1600-1699)</h1>
    </header>
    <nav class="nav-course navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">Inicio</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class = "nav-item">
                        <a class="nav-link" href="Taller de paleografía.html">Taller de paleografía</a></li> 
                    <li class="nav-item">
                        <a class="nav-link" href="modulo1.html">Modulo 1 (1500-1599)</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="modulo3.html">Modulo 3 (1700-1799)</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="main-course py-4">
        <section id="content" class="container">
            <h2>Modulo 2 (1600-1699)</h2>
            <div class="course-info">
                <img src="mod2/jorge_moreno.jpeg"  height="200" alt="Imagen de la persona">
                <div class="course-details">
                    <h3>Dr. Jorge Moreno</h3>
                    <p style="text-align: justify;">Jorge Moreno Egas tiene estudios superiores en la Universidad Católica del Ecuador y en la
                         Université de Franche Comté, Besancon-Francia. Es Docente de Historia Colonial de Ecuador, de Historia de la Iglesia y 
                         de otras materias en Escuela de Ciencias Históricas PUCE; fue director de esa Escuela,
                         Director del Programa de Estudios Especializados de la Facultad de Ciencias Humanas, Docente de la Facultad de Filosofía y Teología “Bernardino Echeverría Ruiz”; es Miembro de Número de la Academia Ecuatoriana de Historia Eclesiástica,
                         de la Sociedad de Estudios e Investigaciones Históricas y Geográficas del Ecuador, de la Asociación de Historiadores Ecuatorianos, 
                         del Instituto Panamericano de Geografía e Historia y varias instituciones académicas nacionales y del exterior. Cuenta con cantidad de
                         publicaciones, entre las que citamos: Pasquines subversivos contra el Gobierno Español aparecidos en Cuenca en 1795;
                         Empréstito del Obispado de Quito al Gobierno del Libertador 1823; y muchas más.</p>

                </div>
            </div>
            <hr class="section-divider">

            <section id="Clases">
                <h3>Clases:</h3>
                <ul>
                    <li> Presenciales: 20, 22, 24 de noviembre.</li>
                    <li> Trabajo independiente: 21, 23 de noviembre.</li>
                </ul>
            </section>
            <hr class="section-divider">
        </section>
        <section id="Recursos">
            <h3>Recursos:</h3>
            <ul>
                <li>AHN. Fondo Corte Suprema, Sección General, Serie Tierras, caja 12 exp. 14,  1682 (folios 1,2,3,4,5,6)</li>
                <li>AHN. Fondo Presidencia de Quito, caja 2, volumen 4, 1642-98, (folios 37,38,39)</li>
                <li>AHN. Corte Suprema, Sección General, Serie Autos Acodados, caja 2, 1630-46, (portada, folios 1,2,3)</li>
                <li>AHN. Fondo Viteri Lafronte. Caja 3, volumen 1, 1689, (folios 168, 169,170) </li>
                <li>AHN. Fondo Notarial, Sección Protocolos, Serie Notaría Primera, vol. 127. 1629.  </li>
                <li>AMHQ. Actas del Consejo1684-1960, Tomo10, f. 207-209v. </li>
            </ul>
        </section>
        <hr class="section-divider">
        </section>
        <section id="bibliografia" class="container text-center mt-4 hidden-section">
            <h2>Bibliografía</h2>

            <a href="mod2/AMHQ, Tomo 10 1684.pdf" download class="btn btn-primary mb-2 download-link">AMHQ, Tomo 10 1684 (PDF)</a>

            <a href="mod2/ColViteric3v11689 compressed.pdf" download class="btn btn-primary mb-2 download-link">ColViteric3v11689 compressed (PDF)</a>

            <a href="mod2/CSAutos acordadosc2v1630 compressed.pdf" download class="btn btn-primary mb-2 download-link">CSAutos acordadosc2v1630 compressed (PDF)</a>

            <a href="mod2/CSPresidenciac2v4compressed.pdf" download class="btn btn-primary mb-2 download-link">CSPresidenciac2v4compressed (PDF)</a>

            <a href="mod2/CSTierrasc12exp14compressed.pdf" download class="btn btn-primary mb-2 download-link">CSTierrasc12exp14compressed  (PDF)</a>

            <a href="mod2/TESTAMENTO Y CODICILIO DE AGUSTIN RIVERA DE CARVAJAL-NOT1-1629. V.127.pdf" download class="btn btn-primary mb-2 download-link">TESTAMENTO Y CODICILIO DE AGUSTIN RIVERA DE CARVAJAL-NOT1-1629. V.127 (PDF)</a>
    
                <hr class="section-divider">
            </section>
    
            <section id="subir-documento" class="container mt-4 hidden-section">
                <h2>Subir documento en PDF</h2>
                <input type="file" id="archivo_pdf">
                <button id="subir_pdf">Subir PDF</button>
            </section>
        </main>
    




        
        <script>
            // Configura Firebase
            var firebaseConfig = {
                apiKey: "AIzaSyBrny7pKET3yB5lIuPy4qoHc8tGng_Aq74",
                authDomain: "foro-31c0b.firebaseapp.com",
                databaseURL: "https://foro-31c0b-default-rtdb.firebaseio.com",
                projectId: "foro-31c0b",
                storageBucket: "foro-31c0b.appspot.com",
                messagingSenderId: "699214140366",
                appId: "1:699214140366:web:957cd6a90aa4bcfcabd19f",
                measurementId: "G-NZ5HCB0PEP"
            };
    
            // Inicializa Firebase solo una vez
            firebase.initializeApp(firebaseConfig);
    
            const auth = firebase.auth();
            const fs = firebase.firestore();
            const storage = firebase.storage();
    
            // Función para mostrar u ocultar enlaces de descarga según el estado de autenticación
            const toggleDownloadLinks = user => {
                const downloadLinks = document.querySelectorAll('.download-link');
                const uploadSection = document.getElementById('subir-documento');
    
                if (user) {
                    // Usuario autenticado: muestra enlaces de descarga y la sección de carga
                    downloadLinks.forEach(link => link.style.display = 'inline-block');
                    uploadSection.style.display = 'block';
                } else {
                    // Usuario no autenticado: oculta enlaces de descarga y la sección de carga
                    downloadLinks.forEach(link => link.style.display = 'none');
                    uploadSection.style.display = 'none';
                }
            };
    
            // Listens for auth state changes
            auth.onAuthStateChanged(user => {
                toggleDownloadLinks(user);
            });
    
            // Escucha el evento click del botón "Subir PDF"
            document.getElementById('subir_pdf').addEventListener('click', function () {
                // Verifica si el usuario está autenticado
                const user = auth.currentUser;
                if (user) {
                    var storageRef = storage.ref();
                    var archivoPDF = document.getElementById('archivo_pdf').files[0];
    
                    if (archivoPDF) {
                        var uploadTask = storageRef.child('archivos_subidos/' + archivoPDF.name).put(archivoPDF);
    
                        uploadTask.on('state_changed', function (snapshot) {
                            // Maneja el progreso de la carga si es necesario
                        }, function (error) {
                            // Maneja errores de carga
                            console.error('Error al subir el archivo: ' + error.message);
                        }, function () {
                            // La carga se completó con éxito
                            console.log('El archivo se ha subido con éxito.');
                        });
                    } else {
                        console.error('Selecciona un archivo PDF antes de intentar subirlo.');
                    }
                } else {
                    console.log("Usuario no autenticado, no se puede subir el archivo");
                }
            });
        </script>
    </body>
    
    </html>
    
